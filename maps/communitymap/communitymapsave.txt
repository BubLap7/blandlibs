{"map":{"name":"Test","ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"xyz":[100,10,100,7,11,7],"objects":[{"p":[0,-10,0],"meshUUID":"D1920146-77EC-4F0D-9507-25A0C7EC71C9","objUUID":"F61ECE2A-AD07-47BA-9E8B-8E5F2A0D8770","si":0},{"p":[0,0,0],"meshUUID":"232FC2FB-19FA-4C15-884C-06AAC8EEA2DB","objUUID":"5A211280-1AF8-433F-A824-A38BACB634E2","i":5,"tm":0,"si":1}],"scripts":{"client":"IyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgTGlicmFyeTogbGlic1xmaXZlTmlnaHRzQ2FtZXJhXGZuaXRlY2FtLmtybmsKIyBBdXRob3I6IENyZWVweUNhdHMKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpzdHIgZm5pdGVjYW1fa2V5cHJlc3MgPSAidSI7CgpvYmogZm5pdGVjYW1fY2FtZXJhQ29udHJvbCA9IHsKCSMgPT0gQ2FtZXJhID09CgljdXJyZW50Q2FtZXJhOiAwLCAjIFdoYXQgY2FtZXJhIGFtIEkgb24/CgljYW1lcmFPbjogZmFsc2UsICMgSXMgdGhlIGNhbWVyYSB1cD8KCWNhbkNoYW5nZTogdHJ1ZSwgIyBDYW4gdGhpcyBwbGF5ZXIgY2hhbmdlIHRoZSBjYW1lcmFzIG5vdz8KCSMgPT0gU3RhdGljID09CglkcmF3U3RhdGljOiB0cnVlLAoJc3RhdGljRnJhbWVJbmRleDogMCwKCXN0YXRpY1RpbWVyOiA1MAp9OwoKIyBDaGFuZ2UgdGhpcyB0byBhZGQgb3IgcmVtb3ZlIGNhbWVyYXMKb2JqW10gZm5pdGVjYW1fY2FtZXJhTGlzdCA9IG9ialsKCQoJewkjIENhbWVyYSAxCgkJcG9zaXRpb246IHsKCQkJeDogNDcuNSwKCQkJeTogMzAsCgkJCXo6IDQ3LjUKCQl9LAoJCWxvb2tBdDogewoJCQl4OiAwLAoJCQl5OiAwLAoJCQl6OiAwCgkJfQoJfSwKCQoJewkjIENhbWVyYSAyCgkJcG9zaXRpb246IHsKCQkJeDogLTQ3LjUsCgkJCXk6IDMwLAoJCQl6OiA0Ny41CgkJfSwKCQlsb29rQXQ6IHsKCQkJeDogMCwKCQkJeTogMCwKCQkJejogMAoJCX0KCX0sCgkKCXsJIyBDYW1lcmEgMwoJCXBvc2l0aW9uOiB7CgkJCXg6IC00Ny41LAoJCQl5OiAzMCwKCQkJejogLTQ3LjUKCQl9LAoJCWxvb2tBdDogewoJCQl4OiAwLAoJCQl5OiAwLAoJCQl6OiAwCgkJfQoJfSwKCQoJewkjIENhbWVyYSA0CgkJcG9zaXRpb246IHsKCQkJeDogNDcuNSwKCQkJeTogMzAsCgkJCXo6IC00Ny41CgkJfSwKCQlsb29rQXQ6IHsKCQkJeDogMCwKCQkJeTogMCwKCQkJejogMAoJCX0KCX0KCQpdOwojIENoYW5nZSB0aGlzIHRvIGFkZCBvciByZW1vdmUgY2FtZXJhcwoKIyBEbyBub3QgbWVzcyB3aXRoIHRoaXMKb2JqW10gZm5pdGVjYW1fY2FtZXJhQnV0dG9ucyA9IG9ialtdOwpudW1bXSBmbml0ZWNhbV9zdGF0aWNBbmltYXRpb25GcmFtZXMgPSBudW1bCgkzNTg1NCwgIyBGcmFtZSAxCgkzNTg1NSwgIyBGcmFtZSAyCgkzNTg1NiwgIyBGcmFtZSAzCgkzNTg1NyAjIEZyYW1lIDQKXTsKYWN0aW9uIGZuaXRlY2FtX2NyZWF0ZUNhbWVyYUJ1dHRvbihzdHIgbmFtZSwgbnVtIGJ1dHRvblgsIG51bSBidXR0b25ZLCBudW0gY2FtZXJhSW5kZXgsIHN0ciB0ZXh0KXsKCXN0ciBidXR0b25TdHlsZSA9ICJjb2xvcjp3aGl0ZTsgZm9udC1zaXplOjE2cHg7IHdvcmQtc3BhY2luZzozMHB4OyBmb250LXZhcmlhbnQ6IHNtYWxsLWNhcHM7ei1pbmRleDo5OTk5O2JhY2tncm91bmQtY29sb3I6cmdiYSg4MiwgODIsIDgyLDAuOSk7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDc1cHg7IGhlaWdodDogNTZweDsgYm9yZGVyOiA0cHggc29saWQgd2hpdGU7IjsKCXN0ciBidXR0b25DdXJyZW50ID0gR0FNRS5VSS5hZGRESVYobmFtZSwgInZpc2libGUiLCBidXR0b25TdHlsZSwgImNhbWVyYU1hcCIpOyAjIEluaXQgQnV0dG9uCglHQU1FLlVJLnVwZGF0ZURJVihuYW1lLCAidG9wIiwgdG9TdHIgYnV0dG9uWSArICJweCIpO0dBTUUuVUkudXBkYXRlRElWKG5hbWUsICJsZWZ0IiwgdG9TdHIgYnV0dG9uWCArICJweCIpOyAjIFBvc2l0aW9uIEJ1dHRvbgoJYWRkVG8gZm5pdGVjYW1fY2FtZXJhQnV0dG9ucyB7ZWxlbWVudDogbmFtZSxjYW1JbmRleDogY2FtZXJhSW5kZXh9OyAjIEFkZCBCdXR0b24gVG8gTGlzdAoJR0FNRS5VSS51cGRhdGVESVZUZXh0KG5hbWUsICJjYW0gIiArIHRleHQpOyAjIEFkZCBUZXh0Cn0KYWN0aW9uIGZuaXRlY2FtX2Rlc3Ryb3lDYW1lcmFVSSgpewoJIyBMb29wIHRocm91Z2ggbGlzdCwgZGVzdHJveSBhbGwgY2FtZXJhIHVpIGRpdnMuCglHQU1FLlVJLnJlbW92ZURJVigiY2FtZXJhTWFwIik7CglHQU1FLlVJLnJlbW92ZURJVigiYmxvY2tlckNhbXMiKTsKCUdBTUUuVUkucmVtb3ZlRElWKCJjYW1GbGlwZG93biIpOwoJZm9yIChudW0gaSA9IGxlbmd0aE9mIGZuaXRlY2FtX2NhbWVyYUJ1dHRvbnMgLSAxOyBpIDwgMDsgaS0tKSB7CgkJR0FNRS5VSS5yZW1vdmVESVYoKHN0cilmbml0ZWNhbV9jYW1lcmFCdXR0b25zW2ldLmVsZW1lbnQpOwoJCXJlbW92ZSBmbml0ZWNhbV9jYW1lcmFCdXR0b25zW2ldOwoJfQp9CiMgRG8gbm90IG1lc3Mgd2l0aCB0aGlzCgojIENoYW5nZSB0aGlzIHRvIG1ha2UgdGhlIFVJIGRpZmZlcmVudAphY3Rpb24gZm5pdGVjYW1fY3JlYXRlQ2FtZXJhVUkoKXsKCSMgU2V0dXAKCXN0ciBibG9ja2VyU3R5bGUgPSAicG9zaXRpb246YWJzb2x1dGU7IHdpZHRoOiA5OTk5OTk5cHg7IGhlaWdodDogOTk5OTk5OXB4OyB0b3A6IDAlOyBsZWZ0OiAwJTsgYmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLDApOyI7CglHQU1FLlVJLmFkZERJVigiYmxvY2tlckNhbXMiLCAidmlzaWJsZSIsIGJsb2NrZXJTdHlsZSk7CglzdHIgbWFwU3R5bGUgPSAiLyogUG9zaXRpb24gYW5kIFNpemUgKi8gcG9zaXRpb246YWJzb2x1dGU7IHdpZHRoOiA2MDBweDsgaGVpZ2h0OiA2MDBweDsgdG9wOiAxMDAlOyBsZWZ0OiAxMDAlOyB0cmFuc2Zvcm06dHJhbnNsYXRlKC0xMjUlLCAtMTI1JSk7IC8qIEltYWdlICovIGJhY2tncm91bmQtc2l6ZTogMTAwJSAxMDAlOyBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLDApOyI7CglHQU1FLlVJLmFkZERJVigiY2FtZXJhTWFwIiwgInZpc2libGUiLCBtYXBTdHlsZSk7CgkKCSMgUHV0IERvd24gQ2FtZXJhcyBCdXR0b24KCXN0ciBmbGlwZG93blN0eWxlID0gImZvbnQtc2l6ZTozMHB4OyBwYWRkaW5nLXRvcDowLjUlOyBwYWRkaW5nLWJvdHRvbTowJTsgdGV4dC1hbGlnbjogY2VudGVyOyBjb2xvcjp3aGl0ZTt6LWluZGV4Ojk5OTk7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDgyLCA4MiwgODIsMC45KTsgcG9zaXRpb246IGFic29sdXRlOyBib3R0b206IDUlOyBsZWZ0OiA1MCU7IHdpZHRoOiAyNSU7IGhlaWdodDogNSU7IGJvcmRlcjogNHB4IHNvbGlkIHdoaXRlOyB0cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUsIC01MCUpIjsKCUdBTUUuVUkuYWRkRElWKCJjYW1GbGlwZG93biIsICJ2aXNpYmxlIiwgZmxpcGRvd25TdHlsZSk7CglHQU1FLlVJLnVwZGF0ZURJVlRleHQoImNhbUZsaXBkb3duIiwgIlZWViBFeGl0IENhbWVyYXMgVlZWIik7CgoJIyBIZXJlIGlzIHdoZXJlIHlvdSBhZGQgYW55IGNhbWVyYSBidXR0b25zIHdpdGggdGhlaXIgY29ycmVzcG9uZGluZyBpbmRleAoJZm5pdGVjYW1fY3JlYXRlQ2FtZXJhQnV0dG9uKCJjYW1CdXR0b24xIiwgMTAwLCAxMDAsIDAsICIwMSIpOyAjIENhbSAxCglmbml0ZWNhbV9jcmVhdGVDYW1lcmFCdXR0b24oImNhbUJ1dHRvbjIiLCA0MDAsIDEwMCwgMSwgIjAyIik7ICMgQ2FtIDIKCWZuaXRlY2FtX2NyZWF0ZUNhbWVyYUJ1dHRvbigiY2FtQnV0dG9uMyIsIDQwMCwgNDAwLCAyLCAiMDMiKTsgIyBDYW0gMwoJZm5pdGVjYW1fY3JlYXRlQ2FtZXJhQnV0dG9uKCJjYW1CdXR0b240IiwgMTAwLCA0MDAsIDMsICIwNCIpOyAjIENhbSA0Cn0KIyBDaGFuZ2UgdGhpcyB0byBtYWtlIHRoZSBVSSBkaWZmZXJlbnQKCiMgUnVucyBldmVyeSBnYW1lIHRpY2sKYWN0aW9uIGZuaXRlY2FtX3VwZGF0ZShudW0gZGVsdGEpIHsKCSMgPT1DQU1FUkEgU1RBUlQ9PQoJCglpZiAoKGJvb2wpZm5pdGVjYW1fY2FtZXJhQ29udHJvbC5jYW1lcmFPbikgewkjIE1vdmUgY2FtZXJhIHRvIHBvc2l0aW9uIGlmIGNhbWVyYSBpcyB1cAoJCUdBTUUuQ0FNRVJBLnBvc2l0aW9uLnggPSAobnVtKWZuaXRlY2FtX2NhbWVyYUxpc3RbKG51bSlmbml0ZWNhbV9jYW1lcmFDb250cm9sLmN1cnJlbnRDYW1lcmFdLnBvc2l0aW9uLng7CgkJR0FNRS5DQU1FUkEucG9zaXRpb24ueSA9IChudW0pZm5pdGVjYW1fY2FtZXJhTGlzdFsobnVtKWZuaXRlY2FtX2NhbWVyYUNvbnRyb2wuY3VycmVudENhbWVyYV0ucG9zaXRpb24ueTsKCQlHQU1FLkNBTUVSQS5wb3NpdGlvbi56ID0gKG51bSlmbml0ZWNhbV9jYW1lcmFMaXN0WyhudW0pZm5pdGVjYW1fY2FtZXJhQ29udHJvbC5jdXJyZW50Q2FtZXJhXS5wb3NpdGlvbi56OwoJCQoJCSMgVGhlbiwgbG9vayBhdCB0aGUgY29vcmRpbmF0ZXMgZ2l2ZW4KCQlHQU1FLkNBTUVSQS5sb29rQXQoKG51bSlmbml0ZWNhbV9jYW1lcmFMaXN0WyhudW0pZm5pdGVjYW1fY2FtZXJhQ29udHJvbC5jdXJyZW50Q2FtZXJhXS5sb29rQXQueCwgKG51bSlmbml0ZWNhbV9jYW1lcmFMaXN0WyhudW0pZm5pdGVjYW1fY2FtZXJhQ29udHJvbC5jdXJyZW50Q2FtZXJhXS5sb29rQXQueSwgKG51bSlmbml0ZWNhbV9jYW1lcmFMaXN0WyhudW0pZm5pdGVjYW1fY2FtZXJhQ29udHJvbC5jdXJyZW50Q2FtZXJhXS5sb29rQXQueik7CgkKCQkjIC0gWWVsbG93IENhbWVyYSBCdXR0b24gLQoJCWZvciAobnVtIGkgPSAwOyBpIDwgbGVuZ3RoT2YgZm5pdGVjYW1fY2FtZXJhQnV0dG9uczsgaSsrKSB7CgkJCWlmKChudW0pZm5pdGVjYW1fY2FtZXJhQnV0dG9uc1tpXS5jYW1JbmRleCA9PSAobnVtKWZuaXRlY2FtX2NhbWVyYUNvbnRyb2wuY3VycmVudENhbWVyYSl7ICMgQ2hlY2sgaWYgdGhlIERJViBjbGlja2VkIGlzIHRoaXMgY2FtZXJhIGJ1dHRvbgoJCQkJR0FNRS5VSS51cGRhdGVESVYoKHN0cilmbml0ZWNhbV9jYW1lcmFCdXR0b25zW2ldLmVsZW1lbnQsICJiYWNrZ3JvdW5kLWNvbG9yIiwgInJnYmEoMjQ0LCAyNTUsIDk3LDAuOSkiKTsKCQkJfSBlbHNlIHsKCQkJCUdBTUUuVUkudXBkYXRlRElWKChzdHIpZm5pdGVjYW1fY2FtZXJhQnV0dG9uc1tpXS5lbGVtZW50LCAiYmFja2dyb3VuZC1jb2xvciIsICJyZ2JhKDgyLCA4MiwgODIsMC45KSIpOwoJCQl9CgkJfQoJfQoKCSMgLSBTdGF0aWMgLQoJKG51bSlmbml0ZWNhbV9jYW1lcmFDb250cm9sLnN0YXRpY1RpbWVyIC09IGRlbHRhOyAjIE1vdmUgZnJhbWUgVGltZXIgZm9yIFN0YXRpYwoJaWYgKChudW0pZm5pdGVjYW1fY2FtZXJhQ29udHJvbC5zdGF0aWNUaW1lciA8PSAwKSB7CgkJCgkJZm5pdGVjYW1fY2FtZXJhQ29udHJvbC5zdGF0aWNUaW1lciA9IDUwOyAjIFJlc2V0IGZyYW1lIHRpbWVyCgkJCgkJKG51bSlmbml0ZWNhbV9jYW1lcmFDb250cm9sLnN0YXRpY0ZyYW1lSW5kZXgrKzsgIyBNb3ZlIGZvcndhcmQgb25lIGFuaW1hdGlvbiBmcmFtZQoJCQoJCWlmICgobnVtKWZuaXRlY2FtX2NhbWVyYUNvbnRyb2wuc3RhdGljRnJhbWVJbmRleCA+IGxlbmd0aE9mIGZuaXRlY2FtX3N0YXRpY0FuaW1hdGlvbkZyYW1lcyAtIDEpIHsKCQkJZm5pdGVjYW1fY2FtZXJhQ29udHJvbC5zdGF0aWNGcmFtZUluZGV4ID0gMDsKCQl9CgkJCgl9CgoJIyA9PUNBTUVSQSBFTkQ9PQp9CgojIEFkZCByZW5kZXJpbmcgbG9naWMgaW4gaGVyZQphY3Rpb24gZm5pdGVjYW1fcmVuZGVyKG51bSBkZWx0YSkgewoJIyA9PUNBTUVSQSBTVEFSVD09CglvYmogZGltZW5zaW9ucyA9IEdBTUUuT1ZFUkxBWS5nZXRTaXplKCk7CgoJIyBEcmF3IFN0YXRpYwoJaWYgKChib29sKWZuaXRlY2FtX2NhbWVyYUNvbnRyb2wuZHJhd1N0YXRpYyAmJiAoYm9vbClmbml0ZWNhbV9jYW1lcmFDb250cm9sLmNhbWVyYU9uKSB7CgkJR0FNRS5PVkVSTEFZLmRyYXdJbWFnZShmbml0ZWNhbV9zdGF0aWNBbmltYXRpb25GcmFtZXNbKG51bSlmbml0ZWNhbV9jYW1lcmFDb250cm9sLnN0YXRpY0ZyYW1lSW5kZXhdLCAobnVtKWRpbWVuc2lvbnMud2lkdGgsIChudW0pZGltZW5zaW9ucy5oZWlnaHQsIChudW0pZGltZW5zaW9ucy53aWR0aCwgKG51bSlkaW1lbnNpb25zLmhlaWdodCwgMCwgMC4xKTsKCQlHQU1FLk9WRVJMQVkuZHJhd0ltYWdlKGZuaXRlY2FtX3N0YXRpY0FuaW1hdGlvbkZyYW1lc1sobnVtKWZuaXRlY2FtX2NhbWVyYUNvbnRyb2wuc3RhdGljRnJhbWVJbmRleF0sIDAsIDAsIChudW0pZGltZW5zaW9ucy53aWR0aCwgKG51bSlkaW1lbnNpb25zLmhlaWdodCwgMTgwLCAwLjEpOwoJCUdBTUUuT1ZFUkxBWS5kcmF3SW1hZ2UoZm5pdGVjYW1fc3RhdGljQW5pbWF0aW9uRnJhbWVzWyhudW0pZm5pdGVjYW1fY2FtZXJhQ29udHJvbC5zdGF0aWNGcmFtZUluZGV4XSwgMCwgKG51bSlkaW1lbnNpb25zLmhlaWdodCwgKG51bSlkaW1lbnNpb25zLndpZHRoLCAobnVtKWRpbWVuc2lvbnMuaGVpZ2h0LCAwLCAwLjEpOwoJCUdBTUUuT1ZFUkxBWS5kcmF3SW1hZ2UoZm5pdGVjYW1fc3RhdGljQW5pbWF0aW9uRnJhbWVzWyhudW0pZm5pdGVjYW1fY2FtZXJhQ29udHJvbC5zdGF0aWNGcmFtZUluZGV4XSwgKG51bSlkaW1lbnNpb25zLndpZHRoLCAwLCAobnVtKWRpbWVuc2lvbnMud2lkdGgsIChudW0pZGltZW5zaW9ucy5oZWlnaHQsIDE4MCwgMC4xKTsKCX0KCgkjIERyYXcgVUkgKE1hcCkKCWlmICgoYm9vbClmbml0ZWNhbV9jYW1lcmFDb250cm9sLmNhbWVyYU9uKSB7CgkJbnVtIGFzc2V0SUQgPSAzNTg2MTsgIyBSZXBsYWNlIHRoaXMgd2l0aCB5b3VyIG1hcCB0ZXh0dXJlCgkJR0FNRS5PVkVSTEFZLmRyYXdJbWFnZShhc3NldElELCAobnVtKWRpbWVuc2lvbnMud2lkdGggLSA0NTAsIChudW0pZGltZW5zaW9ucy5oZWlnaHQgLSA0NTAsIDYwMCwgNjAwLCAwLCAxKTsKCQkKCQkjIERPIE5PVCBSRU1PVkUgVEhJUyBPUiBZT1UgUklTSyBCRUlORyBSRVBPUlRFRCBGT1IgU1RFQUxJTkcgU0NSSVBUUwoJCSMgQUxXQVlTIEdJVkUgVEhFIENSRUFUT1IgQ1JFRElUIE9SIFlPVSBBUkUgV09SVEhMRVNTIEFTIEEgTUFLRVIKCQlHQU1FLk9WRVJMQVkuZHJhd1RleHQoIkNhbWVyYSBTY3JpcHQgYW5kIEdVSSBDcmVhdGVkIGJ5IGNyZWVweWNhdHMgfCBjcmVlcHljYXRzIzY5NDIiLCAobnVtKWRpbWVuc2lvbnMud2lkdGggLyAyLCAobnVtKWRpbWVuc2lvbnMuaGVpZ2h0IC0gMjQsIDAsIDI0LCAiY2VudGVyIiwgIiM2NjYiLCAxKTsKCQkjIERPIE5PVCBSRU1PVkUgVEhJUyBPUiBZT1UgUklTSyBCRUlORyBSRVBPUlRFRCBGT1IgU1RFQUxJTkcgU0NSSVBUUwoJCSMgQUxXQVlTIEdJVkUgVEhFIENSRUFUT1IgQ1JFRElUIE9SIFlPVSBBUkUgV09SVEhMRVNTIEFTIEEgTUFLRVIKCX0KCWVsc2UgewoJCUdBTUUuT1ZFUkxBWS5kcmF3VGV4dCgiUHJlc3MgIiArIGZuaXRlY2FtX2tleXByZXNzICsgIiB0byBsb29rIGF0IGNhbWVyYSIsIChudW0pZGltZW5zaW9ucy53aWR0aCAvIDIsIChudW0pZGltZW5zaW9ucy5oZWlnaHQgLSAyNCwgMCwgMjQsICJjZW50ZXIiLCAiIzY2NiIsIDEpOwoJfQoJIyA9PUNBTUVSQSBFTkQ9PQp9CgojIFVzZXIgcHJlc3NlZCBhIGtleQphY3Rpb24gZm5pdGVjYW1fb25LZXlQcmVzcyhzdHIga2V5LCBudW0gY29kZSkgewoJIyA9PUNBTUVSQSBTVEFSVD09CgkKCWlmKGtleSA9PSBmbml0ZWNhbV9rZXlwcmVzcyAmJiAhKGJvb2wpZm5pdGVjYW1fY2FtZXJhQ29udHJvbC5jYW1lcmFPbikgeyAjIE9uIEtleVByZXNzCgkJZm5pdGVjYW1fY2FtZXJhQ29udHJvbC5jYW1lcmFPbiA9IHRydWU7CgkJR0FNRS5DQU1FUkEuZGV0YWNoKCk7CgkJR0FNRS5JTlBVVFMudW5sb2NrTW91c2UoKTsKCQlmbml0ZWNhbV9jcmVhdGVDYW1lcmFVSSgpOyAjIENyZWF0ZSB0aGUgY2FtZXJhIGJ1dHRvbnMKCX0KCgkjID09Q0FNRVJBIEVORD09Cn0KCiMgVXNlciBjbGlja2VkIGEgRElWIChJRCkKYWN0aW9uIGZuaXRlY2FtX29uRElWQ2xpY2tlZChzdHIgaWQpIHsKCSMgPT1DQU1FUkEgU1RBUlQ9PQoJZm9yIChudW0gaSA9IDA7IGkgPCBsZW5ndGhPZiBmbml0ZWNhbV9jYW1lcmFCdXR0b25zOyBpKyspIHsKCQlpZigoc3RyKWZuaXRlY2FtX2NhbWVyYUJ1dHRvbnNbaV0uZWxlbWVudCA9PSBpZCl7ICMgQ2hlY2sgaWYgdGhlIERJViBjbGlja2VkIGlzIHRoaXMgY2FtZXJhIGJ1dHRvbgoJCQlmbml0ZWNhbV9jYW1lcmFDb250cm9sLmN1cnJlbnRDYW1lcmEgPSAobnVtKWZuaXRlY2FtX2NhbWVyYUJ1dHRvbnNbaV0uY2FtSW5kZXg7CgkJfQoJfQoJaWYgKGlkID09ICJjYW1GbGlwZG93biIpIHsKCQlmbml0ZWNhbV9jYW1lcmFDb250cm9sLmNhbWVyYU9uID0gZmFsc2U7CgkJCUdBTUUuQ0FNRVJBLmF0dGFjaCgpOwoJCQlHQU1FLklOUFVUUy5sb2NrTW91c2UoKTsKCQkJZm5pdGVjYW1fZGVzdHJveUNhbWVyYVVJKCk7ICMgUmVtb3ZlIGNhbWVyYSBidXR0b25zCgl9CgkjID09Q0FNRVJBIEVORD09Cn0jID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyBMaWJyYXJ5OiBsaWJzXHJhZGFyXHJhZGFyX2Mua3JuawojIEF1dGhvcjogQW5kcmlpCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKbnVtIHJhZGFyX2NfcmFkUyA9IDIwMDsgI1JhZGFyIHNpemUKbnVtIHJhZGFyX2NfcmFkRGlzdCA9IDMwMDsgI1JhZGFyIERpc3RhbmNlCm51bSByYWRhcl9jX3JhZFkgPSAyMzA7ICNyYWRhclkgdWkKbnVtIHJhZGFyX2NfcmFkWCA9IDE4MDsgI3JhZGFyWCB1aSB3aWR0aCAtIHJhZGFyWApudW0gcmFkYXJfY19ibGlwU2l6ZSA9IDU7Cm51bSByYWRhcl9jX3JhZFMyID0gcmFkYXJfY19yYWRTLzI7Cm51bSByYWRhcl9jX2JsaXBTID0gcmFkYXJfY19yYWRTKnJhZGFyX2NfYmxpcFNpemUvMTAwOwoKbnVtW10gYWN0aW9uIHJhZGFyX2NfTm9ybWFsaXNlZFBvc2l0aW9uKG9iaiBwcCxvYmogdFBvcykgewogICAgcmV0dXJuIG51bVsoKG51bSl0UG9zLngtKG51bSlwcC54KS9yYWRhcl9jX3JhZERpc3QsMCwoKG51bSl0UG9zLnotKG51bSlwcC56KS9yYWRhcl9jX3JhZERpc3RdOyAKfQoKbnVtW10gYWN0aW9uIHJhZGFyX2NfQmxpcFBvc2l0aW9uKG51bVtdIHAsbnVtIHJ4KSB7CiAgICBudW0gYSA9IC1NYXRoLnRvUmFkKE1hdGgudG9EZWcoTWF0aC5hdGFuMihwWzBdLHBbMl0pKS1yeC05MCk7CiAgICBudW0gZCA9IE1hdGguc3FydChwWzBdKnBbMF0rcFsxXSpwWzFdK3BbMl0qcFsyXSk7CiAgICByZXR1cm4gbnVtW2QqTWF0aC5jb3MoYSkqcmFkYXJfY19yYWRTKjAuNSxkKk1hdGguc2luKGEpKnJhZGFyX2NfcmFkUyowLjVdOwp9CgphY3Rpb24gcmFkYXJfY19yZW5kZXIobnVtIGRlbHRhKSB7CiAgICBvYmogcCA9IEdBTUUuUExBWUVSUy5nZXRTZWxmKCk7CiAgICBpZighIXAgJiYgISFwLnJvdGF0aW9uKSB7CiAgICAgICAgb2JqIHBwID0gKG9iailwLnBvc2l0aW9uOwogICAgICAgIG51bSBwcnggPSBNYXRoLnRvRGVnKChudW0pcC5yb3RhdGlvbi54KTsKICAgICAgICBvYmogcyA9IEdBTUUuT1ZFUkxBWS5nZXRTaXplKCk7CiAgICAgICAgbnVtIHggPSAobnVtKXMud2lkdGgtcmFkYXJfY19yYWRYOwogICAgICAgIG51bSB5ID0gcmFkYXJfY19yYWRZOyMgbnVtIHMuaGVpZ2h0LXJhZGFyX2NfcmFkWTsKICAgICAgICBHQU1FLk9WRVJMQVkuZHJhd0NpcmNsZSh4LHkscmFkYXJfY19yYWRTMixyYWRhcl9jX3JhZFMyLDAsIiMwMDAwMDAiLDAuOCxmYWxzZSk7CiAgICAgICAgR0FNRS5PVkVSTEFZLmRyYXdMaW5lKHgtcmFkYXJfY19yYWRTMix5LHgrcmFkYXJfY19yYWRTMix5LDIsJyM2OTY5NjknLDEpOwogICAgICAgIEdBTUUuT1ZFUkxBWS5kcmF3TGluZSh4LHktcmFkYXJfY19yYWRTMix4LHkrcmFkYXJfY19yYWRTMiwyLCcjNjk2OTY5JywxKTsKICAgICAgICBvYmpbXSBwbCA9IEdBTUUuUExBWUVSUy5saXN0KCk7CiAgICAgICAgZm9yKG51bSBpPTA7IGkgPCBsZW5ndGhPZiBwbDsgaSsrKSB7CiAgICAgICAgICAgIGlmKChib29sKXBsW2ldLmlzWW91IHx8ICEhcGxbaV0uaXNEZWFkKXtjb250aW51ZTt9CiAgICAgICAgICAgIG9iaiB0UG9zID0gKG9iailwbFtpXS5wb3NpdGlvbjsKICAgICAgICAgICAgIGlmIChHQU1FLlVUSUxTLmdldERpc3QzRCgobnVtKXRQb3MueCwobnVtKXRQb3MueSwobnVtKXRQb3MueiwobnVtKXBwLngsKG51bSlwcC55LChudW0pcHAueikgPD0gcmFkYXJfY19yYWREaXN0KSB7CiAgICAgICAgICAgICAgICBudW1bXSBiUG9zID0gcmFkYXJfY19CbGlwUG9zaXRpb24ocmFkYXJfY19Ob3JtYWxpc2VkUG9zaXRpb24ocHAsdFBvcykscHJ4KTsKICAgICAgICAgICAgICAgIEdBTUUuT1ZFUkxBWS5kcmF3Q2lyY2xlKGJQb3NbMF0reCxiUG9zWzFdK3kscmFkYXJfY19ibGlwUyxyYWRhcl9jX2JsaXBTLDAsJyNmZjAwMDAnLDEsZmFsc2UpOwogICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQoKYWN0aW9uIHJhZGFyX2Nfb25QbGF5ZXJTcGF3bihzdHIgaWQpIHsKICAgIG9iaiBwPUdBTUUuUExBWUVSUy5maW5kQnlJRChpZCk7CiAgICBpZighIXApe3AuaXNEZWFkID0gZmFsc2U7fQp9CgphY3Rpb24gcmFkYXJfY19vblBsYXllckRlYXRoKHN0ciBpZCwgc3RyIGtpbGxlcklEKSB7CiAgICBvYmogcD1HQU1FLlBMQVlFUlMuZmluZEJ5SUQoaWQpOwogICAgaWYoISFwKXtwLmlzRGVhZCA9IHRydWU7fQp9IyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgSGVhZGVyOiBkb3VibGVqdW1wXERKX2hlYWQua3JuawojIEF1dGhvcjogYmxhbmRyaWNlCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgU0VUVElOR1M6Cm51bSBkanVtcF9jbGllbnRfREpfaGVhZF9NQVhfSlVNUENPVU5UID0gMjsgIyAyIGlzICJkb3VibGVqdW1wIiwgMyBpcyAidHJpcGxlanVtcCIKYm9vbCBkanVtcF9jbGllbnRfREpfaGVhZF9XQUxMSlVNUF9SRUZSRVNIUyA9IHRydWU7CmJvb2wgZGp1bXBfY2xpZW50X0RKX2hlYWRfRU5BQkxFX0NST1VDSEpVTVAgPSB0cnVlOyAjIGxvd2VyIGhlaWdodCBmb3IgY3JvdWNoIGp1bXAsIGFsc28KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIGFwcGxpZXMgIm1vb25qdW1wIiBtaWQtYWlyIHBoeXNpY3MKbnVtIGRqdW1wX2NsaWVudF9ESl9oZWFkX1NPVU5EID0gMzE5NjA7ICMgc291bmQgSUQuIHNldCB0byAwIGlmIG5vIHNvdW5kIGRlc2lyZWQKCiMgSEFSRC1DT0RFRCBOVU1CRVJTIC0gRE9OJ1QgVE9VQ0gKbnVtIGRqdW1wX2NsaWVudF9ESl9oZWFkX01TX0RVUkFUSU9OX1VOQ1JPVUNIID0gMTY2OwpudW0gZGp1bXBfY2xpZW50X0RKX2hlYWRfSEVJR0hUX0pVTVAgPSAwLjA3OTM7ICMgNjBGUFMsIG1heCBjbGVhcmFuY2UgMTcuOSB1bml0cwpudW0gZGp1bXBfY2xpZW50X0RKX2hlYWRfSEVJR0hUX0NST1VDSEpVTVAgPSAwLjA1OTU7ICMgNjBGUFMsIG1heCBjbGVhcmFuY2UgMTAuMiB1bml0cwojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgTGlicmFyeTogZG91YmxlanVtcFxkanVtcF9jbGllbnQua3JuawojIEF1dGhvcjogYmxhbmRyaWNlCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKb2JqIGRqdW1wX2NsaWVudF91cGRhdGVTdGF0ZSA9IHsgdXBkYXRlSWQ6IDAsIHBsYXllclVwZGF0ZUlkOiAwLCBsYXN0VXBkYXRlOiAwIH07Cm9iaiBkanVtcF9jbGllbnRfY3VycmVudFBsYXllclN0YXRlID0ge307Cm9ialtdIGRqdW1wX2NsaWVudF9wbGF5ZXJTdGF0ZUhpc3RvcnkgPSBvYmpbXTsKCm9iaiBhY3Rpb24gZGp1bXBfY2xpZW50X2ZpbmRIaXN0b3J5U3RhdGUoKSB7CiAgICAjIEN1cnJlbnQgc3RhdGUgdGhhdCB3YXMgc3luY2VkIHVwIHdhcyB0aGUgbGFzdCBzdGF0ZQogICAgb2JqIGN1cnJlbnRTdGF0ZSA9IGRqdW1wX2NsaWVudF9wbGF5ZXJTdGF0ZUhpc3RvcnlbbGVuZ3RoT2YgZGp1bXBfY2xpZW50X3BsYXllclN0YXRlSGlzdG9yeSAtIDFdOwogICAgb2JqW10gcG9zc2libGVTdGF0ZXMgPSBvYmpbXTsKICAgIG51bSBoaWdoZXN0TWF0Y2hlcyA9IDA7CgogICAgIyBjaGVjayBhbGwgNiBwb3NpdGlvbi92ZWxvY2l0eSBudW1iZXJzIHdpbGwgbWF0Y2ggYSBzdGF0ZQogICAgZm9yKG51bSBpID0gbGVuZ3RoT2YgZGp1bXBfY2xpZW50X3BsYXllclN0YXRlSGlzdG9yeSAtIDI7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgb2JqIGhpc3RvcnlTdGF0ZSA9IGRqdW1wX2NsaWVudF9wbGF5ZXJTdGF0ZUhpc3RvcnlbaV07CiAgICAgICAgbnVtIHRvdGFsTWF0Y2hlcyA9IDA7CiAgICAgICAgbnVtIHRvbGVyYW5jZSA9IDAuMDE7CgogICAgICAgIGlmKE1hdGguYWJzKChudW0paGlzdG9yeVN0YXRlLnBvc2l0aW9uLnggLSAobnVtKWN1cnJlbnRTdGF0ZS5wb3NpdGlvbi54KSA8IHRvbGVyYW5jZSkgeyB0b3RhbE1hdGNoZXMrKzsgfSAKICAgICAgICBpZihNYXRoLmFicygobnVtKWhpc3RvcnlTdGF0ZS5wb3NpdGlvbi55IC0gKG51bSljdXJyZW50U3RhdGUucG9zaXRpb24ueSkgPCB0b2xlcmFuY2UpIHsgdG90YWxNYXRjaGVzKys7IH0gCiAgICAgICAgaWYoTWF0aC5hYnMoKG51bSloaXN0b3J5U3RhdGUucG9zaXRpb24ueiAtIChudW0pY3VycmVudFN0YXRlLnBvc2l0aW9uLnopIDwgdG9sZXJhbmNlKSB7IHRvdGFsTWF0Y2hlcysrOyB9IAogICAgICAgIGlmKE1hdGguYWJzKChudW0paGlzdG9yeVN0YXRlLnZlbG9jaXR5LnggLSAobnVtKWN1cnJlbnRTdGF0ZS52ZWxvY2l0eS54KSA8IHRvbGVyYW5jZSkgeyB0b3RhbE1hdGNoZXMrKzsgfSAKICAgICAgICBpZihNYXRoLmFicygobnVtKWhpc3RvcnlTdGF0ZS52ZWxvY2l0eS55IC0gKG51bSljdXJyZW50U3RhdGUudmVsb2NpdHkueSkgPCB0b2xlcmFuY2UpIHsgdG90YWxNYXRjaGVzKys7IH0gCiAgICAgICAgaWYoTWF0aC5hYnMoKG51bSloaXN0b3J5U3RhdGUudmVsb2NpdHkueiAtIChudW0pY3VycmVudFN0YXRlLnZlbG9jaXR5LnopIDwgdG9sZXJhbmNlKSB7IHRvdGFsTWF0Y2hlcysrOyB9IAoKICAgICAgICBpZih0b3RhbE1hdGNoZXMgPT0gNikgewoJCQkjIEdBTUUubG9nKGxlbmd0aE9mIGRqdW1wX2NsaWVudF9wbGF5ZXJTdGF0ZUhpc3RvcnkgLSBpKTsKICAgICAgICAgICAgcmV0dXJuIGRqdW1wX2NsaWVudF9wbGF5ZXJTdGF0ZUhpc3RvcnlbaV07CiAgICAgICAgfQogICAgICAgIGlmKHRvdGFsTWF0Y2hlcyA+IGhpZ2hlc3RNYXRjaGVzKSB7CiAgICAgICAgICAgIGhpZ2hlc3RNYXRjaGVzID0gdG90YWxNYXRjaGVzOwogICAgICAgIH0KICAgICAgICBhZGRUbyBwb3NzaWJsZVN0YXRlcyB7c3RhdGU6IGRqdW1wX2NsaWVudF9wbGF5ZXJTdGF0ZUhpc3RvcnlbaV0sIHRvdGFsTWF0Y2hlczogdG90YWxNYXRjaGVzLCBpZDogbGVuZ3RoT2YgZGp1bXBfY2xpZW50X3BsYXllclN0YXRlSGlzdG9yeSAtIGkgfTsKICAgIH0KICAgICMgUmVzdCBpcyBlcnJvciBsb2dnaW5nCiAgICBHQU1FLmxvZygiRmFpbGVkIHRvIGZpbmQgc3RhdGUgaGlzdG9yeSIsIEdBTUUuVElNRS5ub3coKSk7CglHQU1FLmxvZygiSGlnaGVzdCBtYXRjaGVzOiAiLCBoaWdoZXN0TWF0Y2hlcyk7CiAgICBmb3IobnVtIGkgPSAwOyBpIDwgbGVuZ3RoT2YgcG9zc2libGVTdGF0ZXM7IGkrKykgewogICAgICAgIGlmKChudW0pcG9zc2libGVTdGF0ZXNbaV0udG90YWxNYXRjaGVzID09IGhpZ2hlc3RNYXRjaGVzKSB7CiAgICAgICAgICAgIEdBTUUubG9nKCJJbmRleDogIiwgcG9zc2libGVTdGF0ZXNbaV0uaWQpOwogICAgICAgICAgICByZXR1cm4gKG9iailwb3NzaWJsZVN0YXRlc1tpXS5zdGF0ZTsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gZGp1bXBfY2xpZW50X2N1cnJlbnRQbGF5ZXJTdGF0ZTsKfQoKYm9vbCBkanVtcF9jbGllbnRfc3luY1N0YXJ0ZWQgPSBmYWxzZTsKIyBSdW5zIGV2ZXJ5IGdhbWUgdGljawphY3Rpb24gZGp1bXBfY2xpZW50X3VwZGF0ZShudW0gZGVsdGEpIHsKICAgIGRqdW1wX2NsaWVudF9zeW5jU3RhcnRlZCA9IGZhbHNlOwp9CgpudW0gZGp1bXBfY2xpZW50X2p1bXBDb3VudCA9IDA7CmJvb2wgZGp1bXBfY2xpZW50X2hhc0p1bXBlZCA9IGZhbHNlOwpudW0gZGp1bXBfY2xpZW50X3RpbWVMYXN0Q3JvdWNoZWQgPSBHQU1FLlRJTUUubm93KCk7CgojIFBsYXllciB1cGRhdGUKYWN0aW9uIGRqdW1wX2NsaWVudF9vblBsYXllclVwZGF0ZShzdHIgaWQsIG51bSBkZWx0YSwgb2JqIGlucHV0cykgewogICAgb2JqIHBsYXllciA9IEdBTUUuUExBWUVSUy5nZXRTZWxmKCk7CiAgICBudW0gdGltZU5vdyA9IEdBTUUuVElNRS5ub3coKTsKICAgIChudW0pIGRqdW1wX2NsaWVudF91cGRhdGVTdGF0ZS5wbGF5ZXJVcGRhdGVJZCsrOwoKICAgICMgU3luY2luZzogV2UgZ290IGEgc3luYywgc28gcmVzZXQgdGhlIGN1cnJlbnQgcGxheWVyIHN0YXRlIHRvIHRoZSBjb3JyZWN0IGhpc3RvcnkKICAgIGlmKCFkanVtcF9jbGllbnRfc3luY1N0YXJ0ZWQgJiYgdGltZU5vdyA9PSAobnVtKWRqdW1wX2NsaWVudF91cGRhdGVTdGF0ZS5sYXN0VXBkYXRlKQogICAgewogICAgICAgIGRqdW1wX2NsaWVudF9zeW5jU3RhcnRlZCA9IHRydWU7CiAgICAgICAgZGp1bXBfY2xpZW50X2N1cnJlbnRQbGF5ZXJTdGF0ZSA9IGRqdW1wX2NsaWVudF9maW5kSGlzdG9yeVN0YXRlKCk7CiAgICAgICAgIyBzeW5jIGRvbmUsIHRocm93IG91dCBvbGQgdmFsdWVzCiAgICAgICAgZGp1bXBfY2xpZW50X3BsYXllclN0YXRlSGlzdG9yeSA9IG9ialtdOwogICAgfQoKICAgICMgRG91YmxlLUp1bXAgc3R1ZmYKICAgIGlmICgoYm9vbCkgaW5wdXRzLmNyb3VjaCkgewogICAgICAgIHBsYXllci50aW1lTGFzdENyb3VjaGVkID0gdGltZU5vdzsKICAgIH0KICAgIGlmKChib29sKSBwbGF5ZXIub25Hcm91bmQpIHsKICAgICAgICBkanVtcF9jbGllbnRfY3VycmVudFBsYXllclN0YXRlLmp1bXBDb3VudCA9IGRqdW1wX2NsaWVudF9ESl9oZWFkX01BWF9KVU1QQ09VTlQtMTsKICAgIH0gZWxzZSBpZiAoZGp1bXBfY2xpZW50X0RKX2hlYWRfV0FMTEpVTVBfUkVGUkVTSFMgJiYgKGJvb2wpIHBsYXllci5vbldhbGwgJiYgKGJvb2wpIGlucHV0cy5qdW1wKSB7CiAgICAgICAgZGp1bXBfY2xpZW50X2N1cnJlbnRQbGF5ZXJTdGF0ZS5qdW1wQ291bnQgPSBkanVtcF9jbGllbnRfREpfaGVhZF9NQVhfSlVNUENPVU5ULTE7CiAgICB9IAogICAgaWYoKGJvb2wpIGlucHV0cy5qdW1wKSB7CiAgICAgICAgaWYoIShib29sKWRqdW1wX2NsaWVudF9jdXJyZW50UGxheWVyU3RhdGUuaGFzSnVtcGVkICAmJiAobnVtKWRqdW1wX2NsaWVudF9jdXJyZW50UGxheWVyU3RhdGUuanVtcENvdW50ID4gMCAmJiAhKGJvb2wpcGxheWVyLm9uR3JvdW5kKSB7CiAgICAgICAgICAgIGlmICghKGJvb2wpIHBsYXllci5vbldhbGwgJiYgZGp1bXBfY2xpZW50X0RKX2hlYWRfV0FMTEpVTVBfUkVGUkVTSFMpIHsKICAgICAgICAgICAgICAgIGlmIChkanVtcF9jbGllbnRfREpfaGVhZF9FTkFCTEVfQ1JPVUNISlVNUCAmJiAoKHRpbWVOb3cgLSAobnVtKSBwbGF5ZXIudGltZUxhc3RDcm91Y2hlZCkgPCBkanVtcF9jbGllbnRfREpfaGVhZF9NU19EVVJBVElPTl9VTkNST1VDSCkpIHsKICAgICAgICAgICAgICAgICAgICBwbGF5ZXIudmVsb2NpdHkueSA9IE1hdGgubGVycChkanVtcF9jbGllbnRfREpfaGVhZF9IRUlHSFRfQ1JPVUNISlVNUCxkanVtcF9jbGllbnRfREpfaGVhZF9IRUlHSFRfSlVNUCwodGltZU5vdyAtIChudW0pcGxheWVyLnRpbWVMYXN0Q3JvdWNoZWQpL2RqdW1wX2NsaWVudF9ESl9oZWFkX01TX0RVUkFUSU9OX1VOQ1JPVUNIKTsJIyAibW9vbmp1bXBpbmciIGNhbGN1bGF0aW9uCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHBsYXllci52ZWxvY2l0eS55ID0gZGp1bXBfY2xpZW50X0RKX2hlYWRfSEVJR0hUX0pVTVA7CQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGRqdW1wX2NsaWVudF9ESl9oZWFkX1NPVU5EID4gMCkgewogICAgICAgICAgICAgICAgICAgIEdBTUUuU09VTkQucGxheTJEKDMyNTc2LCAxLCAwLjUsIGZhbHNlKTsgIyBqdW1wIGRqdW1wX2NsaWVudF9ESl9oZWFkX1NPVU5ECiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAobnVtKWRqdW1wX2NsaWVudF9jdXJyZW50UGxheWVyU3RhdGUuanVtcENvdW50LS07CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZGp1bXBfY2xpZW50X2N1cnJlbnRQbGF5ZXJTdGF0ZS5oYXNKdW1wZWQgPSB0cnVlOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgZGp1bXBfY2xpZW50X2N1cnJlbnRQbGF5ZXJTdGF0ZS5oYXNKdW1wZWQgPSBmYWxzZTsKICAgIH0KCiAgICAjIFN5bmMgc2F2aW5nIG9sZCBwbGF5ZXIgc3RhdGVzCiAgICBhZGRUbyBkanVtcF9jbGllbnRfcGxheWVyU3RhdGVIaXN0b3J5IHsKICAgICAgICAjIERhdGEgdG8gdXNlIGluIGFuIGF0dGVtcHQgdG8gZmluZCB0aGUgY29ycmVjdCBzdGF0ZSBpbiBoaXN0b3J5CiAgICAgICAgcG9zaXRpb246IHt4OiBwbGF5ZXIucG9zaXRpb24ueCwgeTogcGxheWVyLnBvc2l0aW9uLnksIHo6IHBsYXllci5wb3NpdGlvbi56IH0sCiAgICAgICAgdmVsb2NpdHk6IHt4OiBwbGF5ZXIudmVsb2NpdHkueCwgeTogcGxheWVyLnZlbG9jaXR5LnksIHo6IHBsYXllci52ZWxvY2l0eS56IH0sCiAgICAgICAgIyBBY3R1YWwgZGF0YSB3ZSB3YW50IHRvIHNhdmUKICAgICAgICBkanVtcF9jbGllbnRfanVtcENvdW50OiBkanVtcF9jbGllbnRfY3VycmVudFBsYXllclN0YXRlLmp1bXBDb3VudCwKICAgICAgICBkanVtcF9jbGllbnRfaGFzSnVtcGVkOiBkanVtcF9jbGllbnRfY3VycmVudFBsYXllclN0YXRlLmhhc0p1bXBlZCwKICAgICAgICB0aW1lOiBHQU1FLlRJTUUubm93KCksCiAgICAgICAgZGp1bXBfY2xpZW50X3RpbWVMYXN0Q3JvdWNoZWQ6IHBsYXllci50aW1lTGFzdENyb3VjaGVkCiAgICB9OwogICAgZGp1bXBfY2xpZW50X3VwZGF0ZVN0YXRlLmxhc3RVcGRhdGUgPSBHQU1FLlRJTUUubm93KCk7ICAgIAp9CgphY3Rpb24gZGp1bXBfY2xpZW50X29uUGxheWVyU3Bhd24oc3RyIGlkKSB7CiAgICBkanVtcF9jbGllbnRfdXBkYXRlU3RhdGUudXBkYXRlSWQgPSAwOwogICAgZGp1bXBfY2xpZW50X3VwZGF0ZVN0YXRlLnBsYXllclVwZGF0ZUlkID0gMDsKfSMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQojIExpYnJhcnk6IGxpYnNca2V5Ym9hcmRvdmVybGF5XGtib3ZlcmxheV9sdWNhLmtybmsKIyBBdXRob3I6IEwtVS1DLUEKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CmFjdGlvbiBrYm92ZXJsYXlfbHVjYV9zdGFydCgpIHsKICAgICMgc3BhY2UgRElWCiAgICBHQU1FLlVJLmFkZERJVigiICIsIHRydWUsICJwb3NpdGlvbjogYWJzb2x1dGU7dG9wOiA5NCU7bGVmdDogY2FsYyg1MCUgKyA0MHB4KTt3aWR0aDogMTMwcHg7aGVpZ2h0OiA1MHB4O2JhY2tncm91bmQtY29sb3I6ICM4Nzg3ODc1ZTsiICsKICAgICJib3JkZXI6IHNvbGlkICMzYTNhM2FlMCA1cHg7dHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7Ym9yZGVyLXJhZGl1czogMTVweDsiKTsKICAgICMgdyBESVYKICAgIEdBTUUuVUkuYWRkRElWKCJ3IiwgdHJ1ZSwgInBvc2l0aW9uOiBhYnNvbHV0ZTt0b3A6IGNhbGMoOTQlIC0gMTYwcHgpO2xlZnQ6IDUwJTt3aWR0aDogNTBweDtoZWlnaHQ6IDUwcHg7YmFja2dyb3VuZC1jb2xvcjogIzg3ODc4NzVlOyIgKwogICAgImJvcmRlcjogc29saWQgIzNhM2EzYWUwIDVweDt0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtib3JkZXItcmFkaXVzOiAxNXB4OyIpOwogICAgIyBzIERJVgogICAgR0FNRS5VSS5hZGRESVYoInMiLCB0cnVlLCAicG9zaXRpb246IGFic29sdXRlO3RvcDogY2FsYyg5NCUgLSA4MHB4KTtsZWZ0OiA1MCU7d2lkdGg6IDUwcHg7aGVpZ2h0OiA1MHB4O2JhY2tncm91bmQtY29sb3I6ICM4Nzg3ODc1ZTsiICsKICAgICJib3JkZXI6IHNvbGlkICMzYTNhM2FlMCA1cHg7dHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7Ym9yZGVyLXJhZGl1czogMTVweDsiKTsKICAgICMgZCBESVYKICAgIEdBTUUuVUkuYWRkRElWKCJkIiwgdHJ1ZSwgInBvc2l0aW9uOiBhYnNvbHV0ZTt0b3A6IGNhbGMoOTQlIC0gODBweCk7bGVmdDogY2FsYyg1MCUgKyA4MHB4KTt3aWR0aDogNTBweDtoZWlnaHQ6IDUwcHg7YmFja2dyb3VuZC1jb2xvcjogIzg3ODc4NzVlOyIgKwogICAgImJvcmRlcjogc29saWQgIzNhM2EzYWUwIDVweDt0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtib3JkZXItcmFkaXVzOiAxNXB4OyIpOwogICAgIyBhIERJVgogICAgR0FNRS5VSS5hZGRESVYoImEiLCB0cnVlLCAicG9zaXRpb246IGFic29sdXRlO3RvcDogY2FsYyg5NCUgLSA4MHB4KTtsZWZ0OiBjYWxjKDUwJSAtIDgwcHgpO3dpZHRoOiA1MHB4O2hlaWdodDogNTBweDtiYWNrZ3JvdW5kLWNvbG9yOiAjODc4Nzg3NWU7IiArCiAgICAiYm9yZGVyOiBzb2xpZCAjM2EzYTNhZTAgNXB4O3RyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO2JvcmRlci1yYWRpdXM6IDE1cHg7Iik7CiAgICAjIGNyb3VjaCBESVYKICAgIEdBTUUuVUkuYWRkRElWKCJzaGlmdCIsIHRydWUsICJwb3NpdGlvbjogYWJzb2x1dGU7dG9wOiA5NCU7bGVmdDogY2FsYyg1MCUgLSA4MHB4KTt3aWR0aDogNTBweDtoZWlnaHQ6IDUwcHg7YmFja2dyb3VuZC1jb2xvcjogIzg3ODc4NzVlOyIgKwogICAgImJvcmRlcjogc29saWQgIzNhM2EzYWUwIDVweDt0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtib3JkZXItcmFkaXVzOiAxNXB4OyIpOwoKfQoKIyBVc2VyIHByZXNzZWQgYSBrZXkKYWN0aW9uIGtib3ZlcmxheV9sdWNhX29uS2V5UHJlc3Moc3RyIGtleSwgbnVtIGNvZGUpIHsKICAgIEdBTUUuVUkudXBkYXRlRElWKGtleSwgImJhY2tncm91bmQtY29sb3IiLCAiIzZjZDM3NDljIik7Cgp9CgojIFVzZXIgcmVsZWFzZWQgYSBrZXkKYWN0aW9uIGtib3ZlcmxheV9sdWNhX29uS2V5VXAoc3RyIGtleSwgbnVtIGNvZGUpIHsKICAgIEdBTUUuVUkudXBkYXRlRElWKGtleSwgImJhY2tncm91bmQtY29sb3IiLCAiIzg3ODc4NzVlIik7Cgp9CnB1YmxpYyBhY3Rpb24gc3RhcnQoKXsKICAgIGtib3ZlcmxheV9sdWNhX3N0YXJ0KCk7CiAgICBmbml0ZWNhbV9rZXlwcmVzcyA9ICJ0IjsKCn0KCgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyBhdXRvLWRldGVjdGVkIHB1YmxpYyBhY3Rpb25zIGZyb20gbGlicmFyaWVzCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpwdWJsaWMgYWN0aW9uIHVwZGF0ZSAobnVtIGRlbHRhKXsKICAgIGZuaXRlY2FtX3VwZGF0ZShkZWx0YSk7CiAgICBkanVtcF9jbGllbnRfdXBkYXRlKGRlbHRhKTsKfQoKcHVibGljIGFjdGlvbiBvbkRJVkNsaWNrZWQgKHN0ciBpZCl7CiAgICBmbml0ZWNhbV9vbkRJVkNsaWNrZWQoaWQpOwp9CgpwdWJsaWMgYWN0aW9uIG9uS2V5UHJlc3MgKHN0ciBrZXksIG51bSBjb2RlKXsKICAgIGZuaXRlY2FtX29uS2V5UHJlc3Moa2V5LCAgY29kZSk7CiAgICBrYm92ZXJsYXlfbHVjYV9vbktleVByZXNzKGtleSwgIGNvZGUpOwp9CgpwdWJsaWMgYWN0aW9uIG9uUGxheWVyRGVhdGggKHN0ciBpZCwgc3RyIGtpbGxlcklEKXsKICAgIHJhZGFyX2Nfb25QbGF5ZXJEZWF0aChpZCwgIGtpbGxlcklEKTsKfQoKcHVibGljIGFjdGlvbiBvblBsYXllclVwZGF0ZSAoc3RyIGlkLCBudW0gZGVsdGEsIG9iaiBpbnB1dHMpewogICAgZGp1bXBfY2xpZW50X29uUGxheWVyVXBkYXRlKGlkLCAgZGVsdGEsICBpbnB1dHMpOwp9CgpwdWJsaWMgYWN0aW9uIHJlbmRlciAobnVtIGRlbHRhKXsKICAgIGZuaXRlY2FtX3JlbmRlcihkZWx0YSk7CiAgICByYWRhcl9jX3JlbmRlcihkZWx0YSk7Cn0KCnB1YmxpYyBhY3Rpb24gb25LZXlVcCAoc3RyIGtleSwgbnVtIGNvZGUpewogICAga2JvdmVybGF5X2x1Y2Ffb25LZXlVcChrZXksICBjb2RlKTsKfQoKcHVibGljIGFjdGlvbiBvblBsYXllclNwYXduIChzdHIgaWQpewogICAgcmFkYXJfY19vblBsYXllclNwYXduKGlkKTsKICAgIGRqdW1wX2NsaWVudF9vblBsYXllclNwYXduKGlkKTsKfQoK","server":"IyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgSGVhZGVyOiBkb3VibGVqdW1wXERKX2hlYWQua3JuawojIEF1dGhvcjogYmxhbmRyaWNlCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgU0VUVElOR1M6Cm51bSBkanVtcF9zZXJ2ZXJfREpfaGVhZF9NQVhfSlVNUENPVU5UID0gMjsgIyAyIGlzICJkb3VibGVqdW1wIiwgMyBpcyAidHJpcGxlanVtcCIKYm9vbCBkanVtcF9zZXJ2ZXJfREpfaGVhZF9XQUxMSlVNUF9SRUZSRVNIUyA9IHRydWU7CmJvb2wgZGp1bXBfc2VydmVyX0RKX2hlYWRfRU5BQkxFX0NST1VDSEpVTVAgPSB0cnVlOyAjIGxvd2VyIGhlaWdodCBmb3IgY3JvdWNoIGp1bXAsIGFsc28KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIGFwcGxpZXMgIm1vb25qdW1wIiBtaWQtYWlyIHBoeXNpY3MKbnVtIGRqdW1wX3NlcnZlcl9ESl9oZWFkX1NPVU5EID0gMzE5NjA7ICMgc291bmQgSUQuIHNldCB0byAwIGlmIG5vIHNvdW5kIGRlc2lyZWQKCiMgSEFSRC1DT0RFRCBOVU1CRVJTIC0gRE9OJ1QgVE9VQ0gKbnVtIGRqdW1wX3NlcnZlcl9ESl9oZWFkX01TX0RVUkFUSU9OX1VOQ1JPVUNIID0gMTY2OwpudW0gZGp1bXBfc2VydmVyX0RKX2hlYWRfSEVJR0hUX0pVTVAgPSAwLjA3OTM7ICMgNjBGUFMsIG1heCBjbGVhcmFuY2UgMTcuOSB1bml0cwpudW0gZGp1bXBfc2VydmVyX0RKX2hlYWRfSEVJR0hUX0NST1VDSEpVTVAgPSAwLjA1OTU7ICMgNjBGUFMsIG1heCBjbGVhcmFuY2UgMTAuMiB1bml0cwojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgTGlicmFyeTogZG91YmxlanVtcFxkanVtcF9zZXJ2ZXIua3JuawojIEF1dGhvcjogYmxhbmRyaWNlCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKCm51bSBkanVtcF9zZXJ2ZXJfdGltZU5vdyA9IDA7CgojIFJ1bnMgZXZlcnkgZ2FtZSB0aWNrCmFjdGlvbiBkanVtcF9zZXJ2ZXJfdXBkYXRlKG51bSBkZWx0YSkgewogICAgZGp1bXBfc2VydmVyX3RpbWVOb3cgPSBHQU1FLlRJTUUubm93KCk7Cn0KCmFjdGlvbiBkanVtcF9zZXJ2ZXJfb25QbGF5ZXJVcGRhdGUoc3RyIGlkLCBudW0gZGVsdGEsIG9iaiBpbnB1dHMpIHsKICAgIGRqdW1wX3NlcnZlcl90aW1lTm93ID0gR0FNRS5USU1FLm5vdygpOwogICAgb2JqIHBsYXllciA9IEdBTUUuUExBWUVSUy5maW5kQnlJRChpZCk7CiAgICAKICAgIGlmICgoYm9vbCkgaW5wdXRzLmNyb3VjaCkgewogICAgICAgIHBsYXllci50TGFzdENyb3VjaCA9IGRqdW1wX3NlcnZlcl90aW1lTm93OwogICAgfQogICAgaWYgKChib29sKSBwbGF5ZXIub25Hcm91bmQpIHsKICAgICAgICBwbGF5ZXIuanVtcENudCA9IGRqdW1wX3NlcnZlcl9ESl9oZWFkX01BWF9KVU1QQ09VTlQtMTsKICAgIH0gZWxzZSBpZiAoZGp1bXBfc2VydmVyX0RKX2hlYWRfV0FMTEpVTVBfUkVGUkVTSFMgJiYgKGJvb2wpIHBsYXllci5vbldhbGwgJiYgKGJvb2wpIGlucHV0cy5qdW1wKSB7CiAgICAgICAgcGxheWVyLmp1bXBDbnQgPSBkanVtcF9zZXJ2ZXJfREpfaGVhZF9NQVhfSlVNUENPVU5ULTE7CgogICAgfQogICAgaWYoKGJvb2wpIGlucHV0cy5qdW1wKSB7CiAgICAgICAgaWYoKGJvb2wpcGxheWVyLmp1bXBQcmVzc2VkID09IGZhbHNlICYmIChudW0pIHBsYXllci5qdW1wQ250ID4gMCAmJiAhKGJvb2wpIHBsYXllci5vbkdyb3VuZCkgewogICAgICAgICAgICBpZiAoIShib29sKSBwbGF5ZXIub25XYWxsICYmIGRqdW1wX3NlcnZlcl9ESl9oZWFkX1dBTExKVU1QX1JFRlJFU0hTKSB7CiAgICAgICAgICAgICAgICBpZiAoZGp1bXBfc2VydmVyX0RKX2hlYWRfRU5BQkxFX0NST1VDSEpVTVAgJiYgKGRqdW1wX3NlcnZlcl90aW1lTm93IC0gKChudW0pIHBsYXllci50TGFzdENyb3VjaCkpIDwgZGp1bXBfc2VydmVyX0RKX2hlYWRfTVNfRFVSQVRJT05fVU5DUk9VQ0gpIHsKICAgICAgICAgICAgICAgICAgICBwbGF5ZXIudmVsb2NpdHkueSA9IE1hdGgubGVycChkanVtcF9zZXJ2ZXJfREpfaGVhZF9IRUlHSFRfQ1JPVUNISlVNUCxkanVtcF9zZXJ2ZXJfREpfaGVhZF9IRUlHSFRfSlVNUCwoZGp1bXBfc2VydmVyX3RpbWVOb3cgLSAoKG51bSkgcGxheWVyLnRMYXN0Q3JvdWNoKSkvZGp1bXBfc2VydmVyX0RKX2hlYWRfTVNfRFVSQVRJT05fVU5DUk9VQ0gpOwkKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnZlbG9jaXR5LnkgPSBkanVtcF9zZXJ2ZXJfREpfaGVhZF9IRUlHSFRfSlVNUDsJICAgIAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKG51bSkgcGxheWVyLmp1bXBDbnQtLTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBwbGF5ZXIuanVtcFByZXNzZWQgPSB0cnVlOwoJfSBlbHNlIHsKICAgICAgICBwbGF5ZXIuanVtcFByZXNzZWQgPSBmYWxzZTsKICAgIH0KfQoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgYXV0by1kZXRlY3RlZCBwdWJsaWMgYWN0aW9ucyBmcm9tIGxpYnJhcmllcwojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KcHVibGljIGFjdGlvbiB1cGRhdGUgKG51bSBkZWx0YSl7CiAgICBkanVtcF9zZXJ2ZXJfdXBkYXRlKGRlbHRhKTsKfQoKcHVibGljIGFjdGlvbiBvblBsYXllclVwZGF0ZSAoc3RyIGlkLCBudW0gZGVsdGEsIG9iaiBpbnB1dHMpewogICAgZGp1bXBfc2VydmVyX29uUGxheWVyVXBkYXRlKGlkLCAgZGVsdGEsICBpbnB1dHMpOwp9Cgo="}},"groups":{},"cam":{"p":[0,50,100],"r":[0,0,0]},"history":[]}